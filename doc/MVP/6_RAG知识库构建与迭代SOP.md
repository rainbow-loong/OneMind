# “心一” RAG知识库构建与迭代SOP

> **版本**: 1.0
> **日期**: 2025-07-03
> **状态**: 生效
> **摘要**: 本文档定义了“心一”项目RAG（检索增强生成）知识库的构建原则、内容标准、格式规范与迭代流程。它是确保AI能持续、高质量地输出符合产品灵魂的回应的核心作业指导书。

---

## 1. 核心原则 (Core Principles)

1.  **质量优于数量 (Quality over Quantity)**: 知识库的价值不在于其规模，而在于每一条知识的深度、智慧与启发性。我们宁缺毋滥。
2.  **催化而非说教 (Catalysis over Lecture)**: 知识库的核心是能引发用户思考的提问、可供借鉴的思维模型和能产生共鸣的故事，而非干巴巴的理论或指令。我们的目标是催化用户的“知行转化”，不是“教学”。
3.  **人话原则 (Plain Language First)**: 所有知识的最终呈现，都必须符合“人话原则”——简单、温暖、易于理解。避免使用任何学术术语或可能让用户感到困惑的词语。
4.  **服务于“SOP” (In Service of the SOP)**: 知识库是为《AI对话设计SOP》服务的“弹药库”。它的每一条内容，都应该能被AI在“内在整合-知行转化”的框架下灵活调用。

---

## 2. 知识源选择标准 (Source Selection Criteria)

我们接受的知识源主要包括但不限于：

*   **心理学与认知科学**: 关于“知行不一”背后的心理机制，如认知失调、拖延心理学、动机理论、习惯养成等（如IFS, ACT, CBT中的相关技巧）。
*   **大学生心智模型**: 关于如何应对学业拖延、如何分解复杂学习任务、如何从"知道但做不到"中恢复的思维模型和最佳实践。
*   **智慧故事与寓言**: 各文化中的禅宗公案、苏菲故事、庄子寓言等，用于比喻和启发。
*   **“黄金对话”提炼**: 从我们自己用户的成功“知行转化”案例中，提炼出的、可复用的对话模式。

**绝对禁止**：直接复制粘贴理论定义、百科词条、学术论文。

---

## 3. 知识格式化规范 (Formatting Specification)

为了让RAG系统能高效地检索和理解，每一条知识都必须以结构化的JSON格式进行录入。

**数据模型 (`KnowledgeChunk`)**:

```json
{
  "id": "OKC-20250703-001",
  "title": "整合内在冲突：与你的‘完美主义’部分对话",
  "tags": ["完美主义", "拖延", "重构", "内在冲突", "IFS"],
  "scene_description": "当用户因为追求完美的解决方案而迟迟不敢开始一项任务（如重构代码）时，此知识块适用。",
  "core_concept": "内在家庭系统（IFS）认为，拖延的背后往往有一个善意的‘部分’（如‘完美主义’），它害怕你因为做得不够好而受到伤害。整合的关键不是消灭它，而是理解并感谢它的保护，然后邀请它信任你的‘自我’有能力处理不完美。这能极大地化解内在的阻力。",
  "inquiry_exemplar": "听起来，你内心有一个声音，希望这次重构能做到完美。我们能花一点时间，先和这个追求完美的部分聊聊吗？它似乎在努力地保护你免受某些伤害。",
  "source": "Internal Family Systems (IFS)"
}
```

**字段说明**:

*   `id` (String): 唯一标识符，格式：`OKC-YYYYMMDD-NNN` (OneMind Knowledge Chunk)。
*   `title` (String): 知识的核心标题，必须简洁易懂。
*   `tags` (Array of Strings): 核心关键词。这是RAG系统进行检索的最重要依据。必须精准、丰富。
*   `scene_description` (String): 描述该知识最适用的用户场景。
*   `core_concept` (String): 知识的核心内容，即方法论、思维模型或智慧本身。
*   `inquiry_exemplar` (String): AI在调用此知识时，可以使用的、具体的、启发性的提问范例。
*   `source` (String): 知识的来源，用于追溯和考证。

---

## 4. 构建与录入流程 (Building & Entry Process)

### **阶段一：知识库冷启动 (Sprint -1)**

*   **目标**: 为应对知识库的冷启动问题，在正式开发前，通过一次“知识冲刺”，快速构建首批高质量知识，为MVP提供初始“弹药”。
*   **核心任务**:
    1.  **设立“知识冲刺期”**: 在Sprint 0之前，设立一个为期一周的“知识冲刺期”，核心目标是**产出首批50个高质量的`KnowledgeChunk`**。
    2.  **邀请外部专家**: 在此期间，邀请1-2位心理学背景的朋友和3-5位资深开发者作为短期顾问，与团队一起进行头脑风暴，贡献最核心、最有效的知识。
    3.  **集中录入**: 完成的知识块，经过评审后，集中录入知识库。

### **阶段二：持续构建**

1.  **提名 (Nomination)**: 任何核心团队成员都可以提名一条新的知识。
2.  **格式化 (Formatting)**: 提名者负责按照第3节的规范，将知识撰写为完整的JSON格式。
3.  **评审 (Review)**:
    *   所有新知识的录入，必须经过“**知识库评审小组**”（由产品负责人和技术负责人组成）的审核。
    *   评审标准：是否符合核心原则？Tags是否准确？范例是否符合“人话原则”？
4.  **录入 (Entry)**: 评审通过后，由指定的技术人员将其录入到生产环境的知识库数据库中。

---

## 5. 迭代与评估流程 (Iteration & Evaluation Process)

知识库是一个需要持续进化的“生命体”。

1.  **相关性自检安全网**:
    *   **核心原则**: 宁缺毋滥，避免AI“高水平地胡说八道”。
    *   **实现方式**: 在AI调用RAG知识库后，增加一个内部的“相关性自检”步骤。如果AI大模型自身判断检索到的知识与用户当前问题相关性低，则**必须放弃**使用该知识，转而生成一句更通用的引导回复。
2.  **与用户反馈联动**:
    *   当用户对某条AI回复给出`👎`的反馈时，如果该回复调用了RAG，则必须将对应的`KnowledgeChunk`标记为`[待优化]`。
    *   分析`👍`回复，总结哪些知识或提问方式是有效的。
3.  **性能评估**:
    *   技术负责人需要定期评估知识库的检索性能。
    *   核心指标：**高频Tags的检索准确率**、**低频/零调用知识块分析**。
4.  **归档与优化**:
    *   被打上`[待优化]`标签的知识，必须在下一个Sprint内完成优化或归档。
    *   持续零调用的知识，应被及时归档，以保持知识库的精简和高效。